/**
 * Main Stylesheet
 * 
 * This file imports Tailwind CSS and sets up the design tokens.
 * Using Tailwind CSS v4 with the @theme directive.
 */

@import "tailwindcss";

/* =============================================================================
   THEME CONFIGURATION
   ============================================================================= */

@theme {
  /* Font Family */
  --font-sans: "Public Sans", system-ui, -apple-system, sans-serif;
  
  /* Colors - Primary Brand */
  --color-primary: #277C78;
  --color-primary-hover: #1F5F5C;
  --color-primary-active: #174745;
  
  /* Colors - Theme Palette (for budgets/pots) */
  --color-green: #277C78;
  --color-yellow: #F2CDAC;
  --color-cyan: #82C9D7;
  --color-navy: #626070;
  --color-red: #C94736;
  --color-purple: #826CB0;
  --color-purple-alt: #AF81BA;
  --color-turquoise: #597C7C;
  --color-brown: #93674F;
  --color-magenta: #934F6F;
  --color-blue: #3F82B2;
  --color-navy-grey: #97A0AC;
  --color-army-green: #7F9161;
  --color-gold: #CAB361;
  --color-orange: #BE6C49;
  
  /* Colors - Greys */
  --color-grey-900: #201F24;
  --color-grey-500: #696868;
  --color-grey-300: #B3B3B3;
  --color-grey-100: #F2F2F2;
  
  /* Colors - Beige */
  --color-beige-500: #98908B;
  --color-beige-100: #F8F4F0;
  
  /* Colors - Semantic */
  --color-success: #277C78;
  --color-error: #C94736;
  --color-warning: #F59E0B;
  
  /* Spacing Scale (8px base) */
  --spacing-50: 4px;
  --spacing-100: 8px;
  --spacing-150: 12px;
  --spacing-200: 16px;
  --spacing-250: 20px;
  --spacing-300: 24px;
  --spacing-400: 32px;
  --spacing-500: 40px;
  
  /* Border Radius */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-full: 9999px;
  
  /* Font Sizes */
  --font-size-xs: 12px;
  --font-size-sm: 14px;
  --font-size-base: 16px;
  --font-size-lg: 18px;
  --font-size-xl: 20px;
  --font-size-2xl: 24px;
  --font-size-3xl: 32px;
  
  /* Line Heights */
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.75;
  
  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  
  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-normal: 200ms ease;
  --transition-slow: 300ms ease;
}

/* =============================================================================
   BASE STYLES
   ============================================================================= */

@layer base {
  /* Font face definitions */
  @font-face {
    font-family: "Public Sans";
    src: url("/assets/fonts/static/PublicSans-Regular.ttf") format("truetype");
    font-weight: 400;
    font-style: normal;
    font-display: swap;
  }

  @font-face {
    font-family: "Public Sans";
    src: url("/assets/fonts/static/PublicSans-Bold.ttf") format("truetype");
    font-weight: 700;
    font-style: normal;
    font-display: swap;
  }

  /* Root styles */
  :root {
    font-family: var(--font-sans);
    font-size: 16px;
    line-height: var(--line-height-normal);
    color: var(--color-grey-900);
    background-color: var(--color-beige-100);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Reset */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  /* Typography defaults */
  h1, h2, h3, h4, h5, h6 {
    font-weight: 700;
    line-height: var(--line-height-tight);
    color: var(--color-grey-900);
  }

  h1 {
    font-size: var(--font-size-3xl);
  }

  h2 {
    font-size: var(--font-size-xl);
  }

  h3 {
    font-size: var(--font-size-base);
  }

  p {
    color: var(--color-grey-500);
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  button {
    font-family: inherit;
    cursor: pointer;
    border: none;
    background: none;
  }

  input, select, textarea {
    font-family: inherit;
    font-size: inherit;
  }

  /* Improved focus styles for accessibility */
  :focus-visible {
    outline: 2px solid var(--color-grey-900);
    outline-offset: 2px;
  }

  /* Remove focus ring for mouse users, keep for keyboard */
  :focus:not(:focus-visible) {
    outline: none;
  }

  /* Skip link for keyboard navigation */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--color-grey-900);
    color: white;
    padding: 8px 16px;
    text-decoration: none;
    z-index: 100;
    transition: top 0.3s;
  }

  .skip-link:focus {
    top: 0;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  img {
    max-width: 100%;
    height: auto;
    display: block;
  }

  ul, ol {
    list-style: none;
  }
}

/* =============================================================================
   UTILITY CLASSES
   ============================================================================= */

@layer utilities {
  /* Text colors */
  .text-primary {
    color: var(--color-grey-900);
  }
  
  .text-secondary {
    color: var(--color-grey-500);
  }
  
  .text-tertiary {
    color: var(--color-grey-300);
  }
  
  .text-success {
    color: var(--color-success);
  }
  
  .text-error {
    color: var(--color-error);
  }

  /* Background colors */
  .bg-card {
    background-color: white;
  }
  
  .bg-page {
    background-color: var(--color-beige-100);
  }

  /* Truncate text */
  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Screen reader only (visually hidden but accessible) */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Safe area padding for mobile devices with notches */
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Touch-friendly hit targets */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}

/* =============================================================================
   CROSS-BROWSER FIXES
   ============================================================================= */

/* Safari-specific input styling */
input[type="date"]::-webkit-calendar-picker-indicator {
  cursor: pointer;
  opacity: 0.6;
}

input[type="date"]::-webkit-calendar-picker-indicator:hover {
  opacity: 1;
}

/* Remove default appearance for number input spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
}

/* Scrollbar styling (webkit browsers) */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-beige-100);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--color-grey-300);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-grey-500);
}

/* Firefox scrollbar styling */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--color-grey-300) var(--color-beige-100);
}
